"use strict";(self.webpackChunkconverter=self.webpackChunkconverter||[]).push([[930],{68930:(Q,y,i)=>{i.r(y),i.d(y,{default:()=>A});var f=i(61266);(0,i(96462).A)(".monaco-editor .tokens-inspect-widget{background-color:var(--vscode-editorHoverWidget-background);border:1px solid var(--vscode-editorHoverWidget-border);color:var(--vscode-editorHoverWidget-foreground);padding:10px;user-select:text;-webkit-user-select:text;z-index:50}.monaco-editor.hc-black .tokens-inspect-widget,.monaco-editor.hc-light .tokens-inspect-widget{border-width:2px}.monaco-editor .tokens-inspect-widget .tokens-inspect-separator{background-color:var(--vscode-editorHoverWidget-border);border:0;height:1px}.monaco-editor .tokens-inspect-widget .tm-token{font-family:var(--monaco-monospace-font)}.monaco-editor .tokens-inspect-widget .tm-token-length{float:right;font-size:60%;font-weight:400}.monaco-editor .tokens-inspect-widget .tm-metadata-table{width:100%}.monaco-editor .tokens-inspect-widget .tm-metadata-value{font-family:var(--monaco-monospace-font);text-align:right}.monaco-editor .tokens-inspect-widget .tm-token-type{font-family:var(--monaco-monospace-font)}",{});var C,o=i(64392),$=i(24968),z=i(98662),H=i(89042),I=i(41233),x=i(80251),h=i(88241),p=i(51811),d=i(323),v=i(17089),B=i(77483),L=i(40333),b=i(30562);let m=class extends I.jG{static{C=this}static{this.ID="editor.contrib.inspectTokens"}static get(s){return s.getContribution(C.ID)}constructor(s,t,e){super(),this._editor=s,this._languageService=e,this._widget=null,this._register(this._editor.onDidChangeModel(n=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(n=>this.stop())),this._register(p.dG.onDidChange(n=>this.stop())),this._register(this._editor.onKeyUp(n=>n.keyCode===H.DD.Escape&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new M(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};m=C=(0,f.C)([(0,f.Q)(1,L.L),(0,f.Q)(2,B.L)],m);let M=(()=>{class a extends I.jG{static{this._ID="editor.contrib.inspectTokensWidget"}constructor(t,e){super(),this.allowEditorOverflow=!0,this._editor=t,this._languageService=e,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=function W(a,s){const t=p.dG.get(s);if(t)return t;const e=a.encodeLanguageId(s);return{getInitialState:()=>v.r3,tokenize:(n,g,c)=>(0,v.$H)(s,c),tokenizeEncoded:(n,g,c)=>(0,v.Lh)(e,c)}}(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return a._ID}_compute(t){const e=this._getTokensAtLine(t.lineNumber);let n=0;for(let l=e.tokens1.length-1;l>=0;l--)if(t.column-1>=e.tokens1[l].offset){n=l;break}let g=0;for(let l=e.tokens2.length>>>1;l>=0;l--)if(t.column-1>=e.tokens2[l<<1]){g=l;break}const c=this._model.getLineContent(t.lineNumber);let u="";n<e.tokens1.length&&(u=c.substring(e.tokens1[n].offset,n+1<e.tokens1.length?e.tokens1[n+1].offset:c.length)),(0,o.Ln)(this._domNode,(0,o.$)("h2.tm-token",void 0,function w(a){let s="";for(let t=0,e=a.length;t<e;t++){const n=a.charCodeAt(t);switch(n){case $.s.Tab:s+="\u2192";break;case $.s.Space:s+="\xb7";break;default:s+=String.fromCharCode(n)}}return s}(u),(0,o.$)("span.tm-token-length",void 0,`${u.length} ${1===u.length?"char":"chars"}`))),(0,o.BC)(this._domNode,(0,o.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const r=1+(g<<1)<e.tokens2.length?this._decodeMetadata(e.tokens2[1+(g<<1)]):null;(0,o.BC)(this._domNode,(0,o.$)("table.tm-metadata-table",void 0,(0,o.$)("tbody",void 0,(0,o.$)("tr",void 0,(0,o.$)("td.tm-metadata-key",void 0,"language"),(0,o.$)("td.tm-metadata-value",void 0,`${r?r.languageId:"-?-"}`)),(0,o.$)("tr",void 0,(0,o.$)("td.tm-metadata-key",void 0,"token type"),(0,o.$)("td.tm-metadata-value",void 0,`${r?this._tokenTypeToString(r.tokenType):"-?-"}`)),(0,o.$)("tr",void 0,(0,o.$)("td.tm-metadata-key",void 0,"font style"),(0,o.$)("td.tm-metadata-value",void 0,`${r?this._fontStyleToString(r.fontStyle):"-?-"}`)),(0,o.$)("tr",void 0,(0,o.$)("td.tm-metadata-key",void 0,"foreground"),(0,o.$)("td.tm-metadata-value",void 0,`${r?z.Q1.Format.CSS.formatHex(r.foreground):"-?-"}`)),(0,o.$)("tr",void 0,(0,o.$)("td.tm-metadata-key",void 0,"background"),(0,o.$)("td.tm-metadata-value",void 0,`${r?z.Q1.Format.CSS.formatHex(r.background):"-?-"}`))))),(0,o.BC)(this._domNode,(0,o.$)("hr.tokens-inspect-separator")),n<e.tokens1.length&&(0,o.BC)(this._domNode,(0,o.$)("span.tm-token-type",void 0,e.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(t){const e=p.dG.getColorMap(),n=d.xn.getLanguageId(t),g=d.xn.getTokenType(t),c=d.xn.getFontStyle(t),u=d.xn.getForeground(t),r=d.xn.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:g,fontStyle:c,foreground:e[u],background:e[r]}}_tokenTypeToString(t){switch(t){case d.Vy.Other:return"Other";case d.Vy.Comment:return"Comment";case d.Vy.String:return"String";case d.Vy.RegEx:return"RegEx";default:return"??"}}_fontStyleToString(t){let e="";return t&d.zz.Italic&&(e+="italic "),t&d.zz.Bold&&(e+="bold "),t&d.zz.Underline&&(e+="underline "),t&d.zz.Strikethrough&&(e+="strikethrough "),0===e.length&&(e="---"),e}_getTokensAtLine(t){const e=this._getStateBeforeLine(t),n=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,e),g=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,e);return{startState:e,tokens1:n.tokens,tokens2:g.tokens,endState:n.endState}}_getStateBeforeLine(t){let e=this._tokenizationSupport.getInitialState();for(let n=1;n<t;n++)e=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,e).endState;return e}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[x.Qj.BELOW,x.Qj.ABOVE]}}}return a})();(0,h.HW)(m.ID,m,h.Hk.Lazy),(0,h.Fl)(class E extends h.ks{constructor(){super({id:"editor.action.inspectTokens",label:b.YN.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(s,t){m.get(t)?.launch()}});var S=i(84212),k=i(20383);function A(){return{}}(0,h.Fl)(class O extends h.ks{constructor(){super({id:"editor.action.toggleHighContrast",label:b.E6.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(s,t){const e=s.get(L.L),n=e.getColorTheme();(0,S.Bb)(n.type)?(e.setTheme(this._originalThemeName||((0,S.HD)(n.type)?k.po:k.tj)),this._originalThemeName=null):(e.setTheme((0,S.HD)(n.type)?k.aQ:k.nr),this._originalThemeName=n.themeName)}})}}]);